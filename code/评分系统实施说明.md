# æ‰‹åŠ¿è¯†åˆ«è¯„åˆ†ç³»ç»Ÿ - å®Œæ•´å®æ–½ï¼ˆå« Landmarks ç»˜åˆ¶ï¼‰

## ğŸ“‹ å®æ–½å†…å®¹

### åç«¯æ”¹åŠ¨ï¼ˆPythonï¼‰

**æ–‡ä»¶ï¼š`server/ml/realtime_recognition.py`**

1. âœ… **EMA å¹³æ»‘ç®—æ³•ï¼ˆclient_id éš”ç¦»ï¼‰**
   - æ·»åŠ  `ema_smooth(client_id, target, value)` å‡½æ•°
   - å¹³æ»‘ç³»æ•° `EMA_ALPHA = 0.35`
   - æŒ‰ `f"{client_id}:{target}"` éš”ç¦»ä¸åŒå®¢æˆ·ç«¯å’Œæ‰‹åŠ¿
   - æ¯ä¸ª EMA æ¡ç›®å¸¦æ—¶é—´æˆ³ï¼Œæ”¯æŒè¿‡æœŸæ¸…ç†

2. âœ… **ç²¾ç¡®çš„å…³é”®ç‚¹è´¨é‡æ£€æµ‹**
   - æ·»åŠ  `check_landmarks_quality()` å‡½æ•°
   - åŸºäºå¹³å‡å¯è§åº¦ï¼ˆavg_vis > 0.45ï¼‰å’Œ bbox é¢ç§¯ï¼ˆbbox_area > 0.01ï¼‰
   - è¿”å› `(landmarks_ok, avg_vis, bbox_area)` ä¸‰å…ƒç»„
   - è´¨é‡å·®æ—¶ç½®ä¿¡åº¦é™æƒ 50%

3. âœ… **EMA ç¼“å­˜æ¸…ç†**
   - æ·»åŠ  `cleanup_ema_cache()` å‡½æ•°
   - æ¯ 100 å¸§è‡ªåŠ¨æ¸…ç†è¶…è¿‡ 5 åˆ†é’Ÿæœªæ›´æ–°çš„ç¼“å­˜
   - é¿å…é•¿æœŸè¿è¡Œå¯¼è‡´å†…å­˜æ³„æ¼

4. âœ… **Debug æ—¥å¿—å¼€å…³**
   - é€šè¿‡ç¯å¢ƒå˜é‡ `DEBUG=true` å¯ç”¨
   - æ‰“å° avg_visã€bbox_areaã€top-3 æ¦‚ç‡åˆ†å¸ƒ
   - ä¾¿äºè°ƒè¯•å’Œå‚æ•°è°ƒä¼˜

5. âœ… **æ–° JSON åè®®ï¼ˆå« landmarksï¼‰**
   ```json
   {
     "ok": true,
     "data": {
       "type": "gesture_result",
       "client_id": "client_1234567890_abc123",
       "hands_detected": true,
       "target": "A",
       "predicted": "A",
       "confidence": 0.85,
       "landmarks_ok": true,
       "landmarks": [
         {"x": 0.45, "y": 0.33, "visibility": 0.95},
         ...  // å…± 21 ä¸ªç‚¹
       ]
     }
   }
   ```

### å‰ç«¯æ”¹åŠ¨ï¼ˆReact/TSï¼‰

**æ–°å¢æ–‡ä»¶ï¼š**

1. âœ… **`client/src/utils/drawHelpers.ts`**
   - å®šä¹‰ MediaPipe Hands çš„ 21 ä¸ªå…³é”®ç‚¹è¿æ¥å…³ç³»
   - `drawLandmarks()` - ç»˜åˆ¶æ‰‹éƒ¨éª¨æ¶å’Œå…³é”®ç‚¹
   - `clearCanvas()` - æ¸…ç©ºç”»å¸ƒ
   - `drawText()` - ç»˜åˆ¶æ–‡æœ¬æç¤º
   - æ”¯æŒæ ¹æ® `landmarksOk` åˆ‡æ¢é¢œè‰²ï¼ˆè“è‰²/çº¢è‰²ï¼‰

2. âœ… **`client/src/utils/wsClient.ts`**
   - `ReconnectingWebSocket` ç±»
   - æŒ‡æ•°é€€é¿é‡è¿ç­–ç•¥ï¼ˆ0.5s â†’ 1s â†’ 2s â†’ ... â†’ 10sï¼‰
   - è‡ªåŠ¨å¤„ç†æ–­çº¿æ¢å¤ï¼Œæ— éœ€ç”¨æˆ·å¹²é¢„

3. âœ… **`client/src/hooks/useGestureScore.ts`**
   - ä» WebSocket æ¶ˆæ¯æå– confidenceã€predictedã€targetã€landmarksã€landmarks_ok
   - ç»´æŠ¤ scoreã€totalã€hitsã€accuracyã€landmarksã€predictedã€landmarksOkã€handsDetected
   - æ— æ‰‹å¸§ä¸è®¡å…¥ç»Ÿè®¡

4. âœ… **`client/src/components/WebcamOverlay.tsx`**
   - å³ä¸Šè§’ Badgeï¼šæ˜¾ç¤º Live Score
   - åº•éƒ¨è¿›åº¦æ¡ï¼šåæ˜ å½“å‰åˆ†æ•°ï¼ˆ0-100ï¼‰
   - æ— æ‰‹æ£€æµ‹æç¤ºï¼ˆå±…ä¸­æ˜¾ç¤º "No hand detected"ï¼‰
   - å¯é€‰è°ƒè¯•ä¿¡æ¯ï¼ˆpredictedã€landmarks_okï¼‰
   - æ ¹æ®åˆ†æ•°åŒºé—´è®¾ç½®é¢œè‰²ï¼š
     - ç»¿è‰² (90+)ï¼šä¼˜ç§€
     - æ©™è‰² (75-89)ï¼šè‰¯å¥½
     - é»„è‰² (60-74)ï¼šåˆæ ¼
     - çº¢è‰² (<60)ï¼šéœ€è¦æ”¹è¿›

**ä¿®æ”¹æ–‡ä»¶ï¼š**

5. âœ… **`client/src/components/WebcamViewer.tsx`**
   - å¯¼å…¥ `drawHelpers` å’Œ `useGestureScore` Hook
   - æ·»åŠ  `overlayCanvasRef` ç”¨äºç»˜åˆ¶ landmarks
   - åœ¨ `<video>` ä¸Šå åŠ åŒå°ºå¯¸ `<canvas>`
   - æ”¶åˆ° landmarks æ•°æ®æ—¶è‡ªåŠ¨ç»˜åˆ¶æ‰‹éƒ¨éª¨æ¶
   - ä¼ é€’æ‰€æœ‰æ–° props ç»™ `WebcamOverlay`ï¼ˆhandsDetectedã€predictedã€landmarksOkï¼‰
   - åœ¨ Recognition Stats é¢æ¿æ·»åŠ ä¸‰è¡Œç»Ÿè®¡æ•°æ®

6. âœ… **`client/src/i18n/en.ts`**
   - æ·»åŠ  `noHandDetected`ã€`poorQuality`ã€`goodQuality` æ–‡æ¡ˆ

---

## ğŸš€ æœ¬åœ°å¯åŠ¨éªŒè¯æ­¥éª¤

### 1. åç«¯å¯åŠ¨

```bash
cd GestureWorkshop

# ç¡®ä¿å·²å®‰è£… Python ä¾èµ–ï¼ˆå¦‚æœªå®‰è£…ï¼‰
pip install mediapipe opencv-python numpy joblib scikit-learn python-shell

# å¯åŠ¨åç«¯æœåŠ¡å™¨ï¼ˆåœ¨ä¸€ä¸ªç»ˆç«¯ï¼‰
npm run dev
```

åç«¯ä¼šï¼š
- åœ¨ç«¯å£ 4000 å¯åŠ¨ HTTP æœåŠ¡
- è‡ªåŠ¨å¯åŠ¨ WebSocket æœåŠ¡ï¼ˆ`/ws/gesture`ï¼‰
- è‡ªåŠ¨å¯åŠ¨ Python æ‰‹åŠ¿è¯†åˆ«è¿›ç¨‹

### 2. å‰ç«¯å¯åŠ¨

```bash
# åœ¨å¦ä¸€ä¸ªç»ˆç«¯
cd GestureWorkshop
npm run dev
```

å‰ç«¯ä¼šåœ¨ `http://localhost:5173` å¯åŠ¨ï¼ˆæˆ–å…¶ä»– Vite åˆ†é…çš„ç«¯å£ï¼‰ã€‚

### 3. æµè§ˆå™¨æµ‹è¯•

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5173/webcam`
2. ç‚¹å‡» "Start Camera" å¹¶å…è®¸æ‘„åƒå¤´æƒé™
3. é€‰æ‹©ä¸€ä¸ªç›®æ ‡æ‰‹åŠ¿ï¼ˆå¦‚ "A"ï¼‰
4. ç‚¹å‡» "Start Recognition"

---

## âœ… è‡ªæµ‹æ¸…å•

### æµ‹è¯•é¡¹ 1ï¼šæ­£ç¡®æ‰‹åŠ¿ç»´æŒ 1-2 ç§’ + Landmarks ç»˜åˆ¶

**æ“ä½œï¼š**
- é€‰æ‹©æ‰‹åŠ¿ "A"
- åšå‡ºæ­£ç¡®çš„ A æ‰‹åŠ¿ï¼ˆæ¡æ‹³ï¼Œæ‹‡æŒ‡åœ¨å¤–ï¼‰
- ä¿æŒ 1-2 ç§’

**é¢„æœŸç»“æœï¼š**
- âœ… Live Score ç¨³å®šåœ¨è¾ƒé«˜åŒºé—´ï¼ˆâ‰¥75ï¼‰
- âœ… Live Score Badge é¢œè‰²ä¸ºç»¿è‰²æˆ–æ©™è‰²
- âœ… Correct Frames æ•°å­—æŒç»­å¢åŠ 
- âœ… Accuracy ç™¾åˆ†æ¯”ä¸Šå‡æˆ–ä¿æŒé«˜ä½
- âœ… åº•éƒ¨è¿›åº¦æ¡æ¥è¿‘æ»¡æ ¼
- âœ… **è§†é¢‘ä¸Šå åŠ è“è‰²æ‰‹éƒ¨éª¨æ¶å’Œå…³é”®ç‚¹**

---

### æµ‹è¯•é¡¹ 2ï¼šé”™è¯¯æ‰‹åŠ¿

**æ“ä½œï¼š**
- é€‰æ‹©æ‰‹åŠ¿ "A"
- æ•…æ„åšå‡ºå…¶ä»–æ‰‹åŠ¿ï¼ˆå¦‚ "B" æˆ–éšæ„æ‰‹åŠ¿ï¼‰

**é¢„æœŸç»“æœï¼š**
- âœ… Live Score æ˜¾è‘—é™ä½ï¼ˆ<60ï¼‰
- âœ… Live Score Badge é¢œè‰²å˜ä¸ºé»„è‰²æˆ–çº¢è‰²
- âœ… Correct Frames ä¸å¢åŠ 
- âœ… Accuracy ç™¾åˆ†æ¯”ä¸‹é™æˆ–ä¿æŒä½ä½
- âœ… åº•éƒ¨è¿›åº¦æ¡è¾ƒçŸ­
- âœ… **éª¨æ¶ä»ç„¶ç»˜åˆ¶ï¼ˆæ­£å¸¸é¢œè‰²æˆ–æ ¹æ®è´¨é‡è°ƒæ•´ï¼‰**

---

### æµ‹è¯•é¡¹ 3ï¼šæ— æ‰‹çŠ¶æ€

**æ“ä½œï¼š**
- æ‰‹ç§»å‡ºæ‘„åƒå¤´è§†é‡

**é¢„æœŸç»“æœï¼š**
- âœ… **å±…ä¸­æ˜¾ç¤º "No hand detected" æç¤º**
- âœ… **éª¨æ¶å’Œå…³é”®ç‚¹æ¶ˆå¤±ï¼ˆcanvas æ¸…ç©ºï¼‰**
- âœ… Live Score å’Œè¿›åº¦æ¡ä¸æ˜¾ç¤º
- âœ… Total Frames ä¸å¢åŠ 
- âœ… Accuracy ä¸å˜åŒ–
- âœ… ç»Ÿè®¡é¢æ¿æ•°å­—å†»ç»“

---

### æµ‹è¯•é¡¹ 4ï¼šè´¨é‡é™æƒï¼ˆèƒŒå…‰/æš—å…‰ï¼‰

**æ“ä½œï¼š**
- åœ¨è¾ƒæš—ç¯å¢ƒä¸‹æµ‹è¯•ï¼Œæˆ–èƒŒå…‰ç¯å¢ƒ

**é¢„æœŸç»“æœï¼š**
- âœ… Live Score ç•¥æœ‰ä¸‹é™ï¼ˆå› è´¨é‡é™æƒï¼‰
- âœ… åˆ†æ•°ä¸ä¼šå‰§çƒˆæŠ–åŠ¨ï¼ˆEMA å¹³æ»‘ç”Ÿæ•ˆï¼‰
- âœ… **éª¨æ¶å¯èƒ½å‘ˆçº¢è‰²åŠé€æ˜ï¼ˆå½“ landmarks_ok=false æ—¶ï¼‰**
- âœ… è°ƒè¯•ä¿¡æ¯æ˜¾ç¤º "Poor quality"ï¼ˆå¦‚æœ showDebug=trueï¼‰

---

### æµ‹è¯•é¡¹ 5ï¼šWebSocket æ¢å¤

**æ“ä½œï¼š**
- åç«¯è¿è¡Œæ—¶åˆ·æ–°æµè§ˆå™¨

**é¢„æœŸç»“æœï¼š**
- âœ… WebSocket è‡ªåŠ¨é‡è¿ï¼ˆæ§åˆ¶å°æ˜¾ç¤ºé‡è¿æ—¥å¿—ï¼‰
- âœ… æ§åˆ¶å°æ— é”™è¯¯
- âœ… é‡æ–°ç‚¹å‡» "Start Recognition" å¯æ­£å¸¸å·¥ä½œ

---

### æµ‹è¯•é¡¹ 6ï¼šEMA client_id éš”ç¦»

**æ“ä½œï¼š**
- æ‰“å¼€ä¸¤ä¸ªæµè§ˆå™¨æ ‡ç­¾é¡µï¼ŒåŒæ—¶è¯†åˆ«ä¸åŒæ‰‹åŠ¿

**é¢„æœŸç»“æœï¼š**
- âœ… ä¸¤ä¸ªæ ‡ç­¾é¡µçš„ Live Score ç‹¬ç«‹å˜åŒ–
- âœ… ä¸ä¼šç›¸äº’å¹²æ‰°ï¼ˆå„è‡ªçš„ EMA ç¼“å­˜éš”ç¦»ï¼‰

---

## ğŸ“Š ä»£ç ä½ç½®é€ŸæŸ¥

### åç«¯ (Python)

| åŠŸèƒ½ | æ–‡ä»¶ | å‡½æ•°/ä½ç½® |
|------|------|----------|
| EMA å¹³æ»‘å‡½æ•°ï¼ˆclient_id éš”ç¦»ï¼‰ | `server/ml/realtime_recognition.py` | `ema_smooth()` - ç¬¬ 69-83 è¡Œ |
| å…³é”®ç‚¹è´¨é‡æ£€æµ‹ | `server/ml/realtime_recognition.py` | `check_landmarks_quality()` - ç¬¬ 85-106 è¡Œ |
| EMA ç¼“å­˜æ¸…ç† | `server/ml/realtime_recognition.py` | `cleanup_ema_cache()` - ç¬¬ 108-125 è¡Œ |
| æ–°åè®®æ¨ç†å‡½æ•° | `server/ml/realtime_recognition.py` | `process_frame()` - ç¬¬ 140-274 è¡Œ |
| Debug æ—¥å¿— | `server/ml/realtime_recognition.py` | ç¬¬ 227-244 è¡Œ |
| ä¸»å¾ªç¯ï¼ˆæ¥æ”¶ client_idï¼‰ | `server/ml/realtime_recognition.py` | `main()` - ç¬¬ 278-303 è¡Œ |

### å‰ç«¯ (React/TS)

| åŠŸèƒ½ | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| æ‰‹éƒ¨éª¨æ¶ç»˜åˆ¶ | `client/src/utils/drawHelpers.ts` | `drawLandmarks()` å‡½æ•° + 21 ç‚¹è¿æ¥å®šä¹‰ |
| WebSocket é‡è¿ | `client/src/utils/wsClient.ts` | `ReconnectingWebSocket` ç±» |
| è¯„åˆ† Hook | `client/src/hooks/useGestureScore.ts` | å®Œæ•´çš„è¯„åˆ†ç»Ÿè®¡é€»è¾‘ + landmarks ç®¡ç† |
| Overlay ç»„ä»¶ | `client/src/components/WebcamOverlay.tsx` | Badge + è¿›åº¦æ¡ + æ— æ‰‹æç¤º + è°ƒè¯•ä¿¡æ¯ |
| ä¸»é›†æˆç‚¹ | `client/src/components/WebcamViewer.tsx` | Hook è°ƒç”¨ã€canvas å åŠ ã€landmarks ç»˜åˆ¶ |
| i18n æ–‡æ¡ˆ | `client/src/i18n/en.ts` | 55-66 è¡Œï¼ˆå« noHandDetected ç­‰æ–°æ–‡æ¡ˆï¼‰ |

---

## ğŸ”§ é˜ˆå€¼ä¸å‚æ•°è°ƒæ•´

### è°ƒæ•´ EMA å¹³æ»‘ç³»æ•°

**æ–‡ä»¶ï¼š** `server/ml/realtime_recognition.py`  
**ä½ç½®ï¼š** ç¬¬ 53 è¡Œ

```python
EMA_ALPHA = 0.35  # è°ƒæ•´æ­¤å€¼
```

- **æ›´é«˜çš„å€¼**ï¼ˆå¦‚ 0.5ï¼‰ï¼šå“åº”æ›´å¿«ï¼Œä½†å¯èƒ½æ›´æŠ–åŠ¨
- **æ›´ä½çš„å€¼**ï¼ˆå¦‚ 0.2ï¼‰ï¼šæ›´å¹³æ»‘ï¼Œä½†å“åº”ç¨æ…¢

---

### è°ƒæ•´ landmarks_ok åˆ¤å®šé˜ˆå€¼

**æ–‡ä»¶ï¼š** `server/ml/realtime_recognition.py`  
**ä½ç½®ï¼š** ç¬¬ 103 è¡Œ

```python
landmarks_ok = (avg_vis > 0.45 and bbox_area > 0.01)
```

- **avg_vis > 0.45**ï¼šå¹³å‡å¯è§åº¦é˜ˆå€¼ï¼ˆ0-1ï¼‰ï¼Œæ›´é«˜å€¼æ›´ä¸¥æ ¼
- **bbox_area > 0.01**ï¼šæ‰‹éƒ¨ bbox é¢ç§¯é˜ˆå€¼ï¼ˆ0-1ï¼‰ï¼Œé˜²æ­¢æ‰‹éƒ¨å¤ªå°æˆ–å¤ªè¿œ

---

### è°ƒæ•´ EMA ç¼“å­˜è¿‡æœŸæ—¶é—´

**æ–‡ä»¶ï¼š** `server/ml/realtime_recognition.py`  
**ä½ç½®ï¼š** ç¬¬ 54 è¡Œ

```python
MAX_CACHE_AGE = 300  # ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰
```

- **300**ï¼š5 åˆ†é’Ÿæœªæ›´æ–°çš„ç¼“å­˜ä¼šè¢«æ¸…ç†
- æ›´çŸ­çš„æ—¶é—´ï¼ˆå¦‚ 120ï¼‰ï¼šæ›´é¢‘ç¹æ¸…ç†ï¼ŒèŠ‚çœå†…å­˜
- æ›´é•¿çš„æ—¶é—´ï¼ˆå¦‚ 600ï¼‰ï¼šå…è®¸æ›´é•¿æ—¶é—´çš„ä¼šè¯

---

### è°ƒæ•´è´¨é‡é™æƒç³»æ•°

**æ–‡ä»¶ï¼š** `server/ml/realtime_recognition.py`  
**ä½ç½®ï¼š** ç¬¬ 247 è¡Œ

```python
if not landmarks_ok:
    raw_confidence *= 0.5  # è°ƒæ•´æ­¤å€¼ï¼ˆ0.0 - 1.0ï¼‰
```

- **0.5**ï¼šè´¨é‡å·®æ—¶é™æƒ 50%ï¼ˆé»˜è®¤ï¼‰
- **0.3**ï¼šæ›´ä¸¥æ ¼çš„é™æƒ
- **0.7**ï¼šæ›´å®½æ¾çš„é™æƒ

---

### è°ƒæ•´é”™è¯¯æ‰‹åŠ¿é™æƒç³»æ•°

**æ–‡ä»¶ï¼š** `server/ml/realtime_recognition.py`  
**ä½ç½®ï¼š** ç¬¬ 251 è¡Œ

```python
if target_gesture and predicted_label != target_gesture:
    raw_confidence *= 0.6  # è°ƒæ•´æ­¤å€¼ï¼ˆ0.0 - 1.0ï¼‰
```

- **0.6**ï¼šé”™è¯¯æ‰‹åŠ¿æ—¶é™æƒ 40%ï¼ˆé»˜è®¤ï¼Œä½“éªŒè¾ƒæŸ”å’Œï¼‰
- **0.3**ï¼šæ›´ä¸¥æ ¼ï¼ˆåˆ†æ•°ä¸‹é™æ›´æ˜æ˜¾ï¼‰
- **0.8**ï¼šæ›´å®½æ¾ï¼ˆé”™è¯¯æ—¶åˆ†æ•°ä¸‹é™è¾ƒå°‘ï¼‰

---

### è°ƒæ•´é¢œè‰²é˜ˆå€¼

**æ–‡ä»¶ï¼š** `client/src/components/WebcamOverlay.tsx`  
**ä½ç½®ï¼š** ç¬¬ 39-44 è¡Œ

```typescript
const getColor = () => {
  if (score >= 90) return 'bg-green-600';     // ä¼˜ç§€
  if (score >= 75) return 'bg-emerald-500';   // è‰¯å¥½
  if (score >= 60) return 'bg-yellow-500';    // åˆæ ¼
  return 'bg-red-500';                         // éœ€è¦æ”¹è¿›
};
```

---

### å¯ç”¨ Debug æ—¥å¿—

**æ–¹å¼ 1ï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰**

```bash
# Windows PowerShell
$env:DEBUG="true"
npm run dev

# Linux/Mac
DEBUG=true npm run dev
```

**æ–¹å¼ 2ï¼šä»£ç ä¸­ç›´æ¥ä¿®æ”¹**

**æ–‡ä»¶ï¼š** `server/ml/realtime_recognition.py`  
**ä½ç½®ï¼š** ç¬¬ 58 è¡Œ

```python
DEBUG = True  # æ”¹ä¸º True
```

**Debug è¾“å‡ºç¤ºä¾‹ï¼š**
```json
{"type": "debug", "avg_vis": 0.876, "bbox_area": 0.0234, "landmarks_ok": true}
{"type": "debug", "top3_probs": [["A", 0.89], ["B", 0.07], ["C", 0.03]]}
```

---

### å¯ç”¨å‰ç«¯è°ƒè¯•ä¿¡æ¯

**æ–‡ä»¶ï¼š** `client/src/components/WebcamViewer.tsx`  
**ä½ç½®ï¼š** ç¬¬ 493 è¡Œ

```typescript
<WebcamOverlay
  score={score}
  handsDetected={handsDetected}
  predicted={predicted}
  landmarksOk={landmarksOk}
  showDebug={true}  // æ”¹ä¸º true
/>
```

æ˜¾ç¤ºæ•ˆæœï¼šå³ä¸Šè§’ä¼šæ˜¾ç¤º Predicted å’Œ Quality è°ƒè¯•ä¿¡æ¯

---

## ğŸ“ æäº¤ä¿¡æ¯

```
feat(scoring): live score overlay, accuracy stats, and landmarks rendering

Backend changes:
- Add EMA smoothing (alpha=0.35) with client_id isolation to prevent cross-session pollution
- Implement precise landmarks quality check based on avg_vis (>0.45) and bbox_area (>0.01)
- Add EMA cache cleanup (LRU, 5-min expiration) to prevent memory leaks
- Return new JSON protocol with client_id, hands_detected, predicted, target, confidence, landmarks_ok, landmarks[21]
- Add DEBUG mode for avg_vis, bbox_area, and top-3 probability logging

Frontend changes:
- Add drawHelpers.ts for rendering MediaPipe Hands skeleton (21 landmarks + connections)
- Add wsClient.ts for WebSocket reconnection with exponential backoff (0.5s â†’ 10s)
- Enhance useGestureScore hook to track landmarks, predicted, landmarksOk, handsDetected
- Extend WebcamOverlay with "No hand detected" prompt and optional debug info
- Integrate canvas overlay on video for real-time skeleton drawing (blue/red based on quality)
- Add live score badge, progress bar, and recognition stats (Total/Correct/Accuracy)
- i18n: Add noHandDetected, poorQuality, goodQuality English labels

Features:
- No hands frames are excluded from statistics
- Color zones: green (90+), orange (75-89), yellow (60-74), red (<60)
- Skeleton turns red when landmarks_ok=false
- Canvas clears when no hand detected
- WebSocket auto-reconnects on disconnect
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šWebSocket è¿æ¥å¤±è´¥

**ç—‡çŠ¶ï¼š** æ§åˆ¶å°æ˜¾ç¤º "WebSocket connection failed"

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤åç«¯å·²å¯åŠ¨ï¼ˆç«¯å£ 4000ï¼‰
2. æ£€æŸ¥ `http://localhost:4000/ws/gesture` æ˜¯å¦å¯è®¿é—®
3. æŸ¥çœ‹åç«¯æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—

---

### é—®é¢˜ 2ï¼šPython è¿›ç¨‹å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶ï¼š** åç«¯æ§åˆ¶å°æ˜¾ç¤º "Failed to start Python"

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# é‡æ–°å®‰è£… Python ä¾èµ–
pip install mediapipe opencv-python numpy joblib scikit-learn

# ç¡®è®¤ Python å¯æ‰§è¡Œ
python --version
```

---

### é—®é¢˜ 3ï¼šLive Score å§‹ç»ˆä¸º 0

**ç—‡çŠ¶ï¼š** Overlay æ˜¾ç¤ºï¼Œä½†åˆ†æ•°å§‹ç»ˆä¸º 0

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ŒæŸ¥çœ‹ WebSocket æ¶ˆæ¯
2. ç¡®è®¤æ¶ˆæ¯æ ¼å¼æ˜¯å¦ç¬¦åˆæ–°åè®® `{ok: true, data: {...}}`
3. æ£€æŸ¥ Python æ˜¯å¦æ­£å¸¸è¿”å› `confidence` å­—æ®µ

---

### é—®é¢˜ 4ï¼šç»Ÿè®¡æ•°æ®ä¸æ›´æ–°

**ç—‡çŠ¶ï¼š** Total Frames / Correct Frames ä¸å¢åŠ 

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤æ‘„åƒå¤´ç”»é¢ä¸­æœ‰æ‰‹
2. æ£€æŸ¥ `hands_detected` æ˜¯å¦ä¸º `true`
3. æŸ¥çœ‹ `onScoreMessage()` æ˜¯å¦è¢«æ­£ç¡®è°ƒç”¨

---

## ğŸ“¸ é¢„æœŸæ•ˆæœæè¿°

1. **æ­£ç¡®æ‰‹åŠ¿æ—¶ï¼š**
   - å³ä¸Šè§’ç»¿è‰² Badgeï¼š"Live Score: 92"
   - åº•éƒ¨è¿›åº¦æ¡ï¼šç»¿è‰²ï¼Œå‡ ä¹æ»¡æ ¼
   - **è§†é¢‘ä¸Šå åŠ è“è‰²æ‰‹éƒ¨éª¨æ¶**ï¼ŒåŒ…å« 21 ä¸ªå…³é”®ç‚¹å’Œè¿æ¥çº¿
   - ç»Ÿè®¡é¢æ¿ï¼šTotal Frames æŒç»­å¢åŠ ï¼ŒAccuracy 90%+

2. **é”™è¯¯æ‰‹åŠ¿æ—¶ï¼š**
   - å³ä¸Šè§’çº¢è‰² Badgeï¼š"Live Score: 45"
   - åº•éƒ¨è¿›åº¦æ¡ï¼šçº¢è‰²ï¼Œä¸åˆ°ä¸€åŠ
   - **éª¨æ¶ä»ç„¶ç»˜åˆ¶**ï¼ˆå¯èƒ½æ ¹æ®è´¨é‡å˜ä¸ºçº¢è‰²ï¼‰
   - ç»Ÿè®¡é¢æ¿ï¼šTotal Frames å¢åŠ ï¼ŒCorrect Frames ä¸å˜ï¼ŒAccuracy ä¸‹é™

3. **æ— æ‰‹æ—¶ï¼š**
   - **å±…ä¸­æ˜¾ç¤º "No hand detected" é»‘è‰²åŠé€æ˜æç¤ºæ¡†**
   - **éª¨æ¶å’Œå…³é”®ç‚¹æ¶ˆå¤±ï¼ˆcanvas å·²æ¸…ç©ºï¼‰**
   - Live Score å’Œè¿›åº¦æ¡ä¸æ˜¾ç¤º
   - ç»Ÿè®¡é¢æ¿æ•°å­—ä¸å˜ï¼ˆæ— æ‰‹å¸§ä¸è®¡å…¥ç»Ÿè®¡ï¼‰

4. **è´¨é‡å·®æ—¶ï¼ˆæš—å…‰/èƒŒå…‰ï¼‰ï¼š**
   - Live Score ç•¥æœ‰ä¸‹é™
   - **éª¨æ¶å‘ˆçº¢è‰²åŠé€æ˜**ï¼ˆlandmarks_ok=falseï¼‰
   - å¦‚æœå¯ç”¨ showDebugï¼Œå³ä¸Šè§’æ˜¾ç¤º "Quality: Poor quality"

---

## ğŸ‰ å®Œæˆ

æ‰€æœ‰åŠŸèƒ½å·²å®ç°å¹¶é€šè¿‡ linter æ£€æŸ¥ï¼Œæ— é”™è¯¯ã€‚

**æ–°å¢åŠŸèƒ½æ¸…å•ï¼š**
- âœ… æ‰‹éƒ¨å…³é”®ç‚¹å’Œéª¨æ¶å®æ—¶ç»˜åˆ¶ï¼ˆ21 ä¸ªç‚¹ + è¿æ¥çº¿ï¼‰
- âœ… ç²¾ç¡®çš„ landmarks è´¨é‡åˆ¤å®šï¼ˆavg_vis + bbox_areaï¼‰
- âœ… client_id éš”ç¦»çš„ EMA å¹³æ»‘ï¼ˆé˜²æ­¢è·¨ä¼šè¯æ±¡æŸ“ï¼‰
- âœ… EMA ç¼“å­˜æ¸…ç†ï¼ˆé˜²æ­¢å†…å­˜æ³„æ¼ï¼‰
- âœ… Debug æ—¥å¿—å¼€å…³ï¼ˆç¯å¢ƒå˜é‡æˆ–ä»£ç å¼€å…³ï¼‰
- âœ… WebSocket è‡ªåŠ¨é‡è¿ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
- âœ… æ— æ‰‹æ£€æµ‹æç¤ºå’Œ canvas æ¸…ç©º
- âœ… å®æ—¶è¯„åˆ† Overlayï¼ˆBadge + è¿›åº¦æ¡ï¼‰
- âœ… è¯†åˆ«ç»Ÿè®¡é¢æ¿ï¼ˆTotal/Correct/Accuracyï¼‰
- âœ… é¢œè‰²åˆ†çº§åé¦ˆï¼ˆç»¿/æ©™/é»„/çº¢ï¼‰
- âœ… å¯é€‰è°ƒè¯•ä¿¡æ¯æ˜¾ç¤º

**æ–‡ä»¶ä¿®æ”¹æ•°é‡ï¼š**
- åç«¯ Pythonï¼š1 ä¸ªæ–‡ä»¶ä¿®æ”¹
- å‰ç«¯æ–°å¢ï¼š3 ä¸ªæ–‡ä»¶ï¼ˆdrawHelpers.ts, wsClient.ts, WebcamOverlay.tsx å·²å­˜åœ¨ä½†å¤§å¹…æ‰©å±•ï¼‰
- å‰ç«¯ä¿®æ”¹ï¼š3 ä¸ªæ–‡ä»¶ï¼ˆWebcamViewer.tsx, useGestureScore.ts, en.tsï¼‰

å¦‚éœ€è¿›ä¸€æ­¥è°ƒæ•´é˜ˆå€¼æˆ–å‚æ•°ï¼Œè¯·å‚è€ƒä¸Šæ–¹"é˜ˆå€¼ä¸å‚æ•°è°ƒæ•´"ç« èŠ‚ã€‚

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·å‚è€ƒ"æ•…éšœæ’é™¤"ç« èŠ‚ï¼Œæˆ–æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ã€‚

**ä¸‹ä¸€æ­¥å»ºè®®ï¼š**
1. å¯åŠ¨åç«¯å’Œå‰ç«¯ï¼Œè¿›å…¥ `/webcam` é¡µé¢æµ‹è¯•
2. æŒ‰ç…§"è‡ªæµ‹æ¸…å•"é€é¡¹éªŒè¯åŠŸèƒ½
3. å¦‚éœ€è°ƒè¯•ï¼Œå¯ç”¨ DEBUG æ¨¡å¼æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
4. æ ¹æ®å®é™…ä½¿ç”¨ä½“éªŒè°ƒæ•´é˜ˆå€¼å‚æ•°

